{% extends 'base_v21.html.twig' %}

{% block title %}
	{{ annonce.titre }}
	| Olona Talents
{% endblock %}

{% block meta %}
	{{ parent() }}
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
{% endblock %}

{% block sidebar %}
	{% include "v2/dashboard/layout_entreprise.html.twig" %}
{% endblock %}

{% block body %}
	<section class="container my-5">
		<div class="card shadow">
			<div class="card-body p-3 p-sm-5">
				<div class="">
					<span class="position-absolute top-0 start-50 px-3 translate-middle badge bg-secondary-subtle border border-secondary-subtle text-secondary-emphasis rounded-pill">
						<i class="bi bi-person-workspace me-2"></i>
						Annonce | Réf:{{ generateJobReference(annonce.id) }}
					</span>
				</div>
				<h1 class="card-title h3">
					<i class="bi bi-megaphone text-warning me-2"></i>
					{{ annonce.titre }}
				</h1>
				<hr>
				<p class="small fw-light">
					<i class="bi bi-circle-fill small mx-2 text-danger"></i>
					{{ getStatuses(annonce.status) }}
					<span class="small text-center mx-1 mx-sm-3">|</span>
					{{ annonce.typeContrat }}
					<span class="small text-center mx-1 mx-sm-3">|</span>
					<i class="bi bi-geo-alt-fill"></i>
					{{ annonce.lieu }}
					<span class="small text-center mx-1 mx-sm-3">|</span>
					<i class="bi bi-hourglass-split"></i>
					Expire le
					{{ annonce.dateExpiration|date('d/m/Y') }}
					<span class="small text-center mx-1 mx-sm-3">|</span>
					<i class="bi bi-eye"></i>
					{{ annonce.annonceVues|length }}
					vues
				</p>
				<h2 class="fs-5">Description du poste</h2>
				<p>{{ annonce.description|raw }}</p>

				<div class="mt-3">
					<p class="">
						<i class="bi bi-gear mx-1 mx-sm-3 text-primary"></i>
						Compétences requises :
						{% if annonce.competences|length > 0 %}
							{% for skill in annonce.competences %}
								<span class="badge rounded-pill text-bg-secondary">{{ skill.nom }}</span>
							{% endfor %}
						{% else %}
							<p>Aucune compétence spécifique requise.</p>
						{% endif %}
					</p>
				</div>

				<div class="mb-3">
					<p class="">
						<i class="bi bi-calendar-week mx-1 mx-sm-3 text-primary"></i>
						Publication :
						<span class="text-strong">{{ annonce.dateCreation|time_ago }}</span>
					</p>
				</div>

				<div class="mb-3">
					<p class="">
						<i class="bi bi-currency-exchange mx-1 mx-sm-3 text-primary"></i>
						Budget indicatif :
						<span class="text-strong">
							{% if annonce.budgetAnnonce is defined and annonce.budgetAnnonce is not null %}
								{{ annonce.budgetAnnonce.montant }}
								{{annonce.budgetAnnonce.devise}}
							{% else %}
								{{ annonce.salaire }}
								€
							{% endif %}
						</span>
					</p>
				</div>
					<a href="{{path('app_v2_recruiter_job_listing_edit', {'jobListing': annonce.id})}}" class="btn btn-outline-warning fw-semibold text-uppercase my-3 px-5">
						<i class="mx-2 bi bi-pencil"></i>Editer
					</a>
					{% if annonce.boost is not empty or annonce.boostFacebook is not empty %}
						{% if annonce.boost is not null %}
							{{ getJobListingBoostVisibilityOT(annonce, app.user)|raw }}
						{% endif %}
						{% if annonce.boostFacebook is not null %}
					 		{{ getJobListingBoostVisibilityFB(annonce, app.user)|raw }}
						{% endif %}
					{% else %}
						<button type="button" data-bs-toggle="modal" data-bs-target="#boostAnnonce_{{ annonce.id }}" data-bs-type="boost-annonce" data-bs-annonce="{{ annonce.id }}" class="btn btn-dark  texte-uppercase  my-3 px-5">
							<i class="mx-2 bi bi-rocket-takeoff"></i>Booster
						</button>
					{% endif %}
			</div>
			<div class="row p-5">
				<div class="col-8">
					<h2 class="fs-5">Aperçu</h2>
					<div class="card my-3 small px-5 py-4">
						<h3 class="fs-6">
						<a href="{{ path('app_v2_candidate_view_job_offer', {'id': annonce.id })}}">
							{{ annonce.titre }}
						</a>
						</h3>
						<div class="small">
							{{ annonce.shortDescription }}
						</div>
						<div class="small">
							<p class="small fw-light">
								<span class="badge bg-info rounded-pill px-2">{{ annonce.typeContrat }}</span>
								<span class="small text-center mx-2">|</span>
								<i class="bi bi-hourglass-split"></i>
								Publiée le
								{{ annonce.dateCreation|date('d/m/Y') }}
								<span class="small text-center mx-2">|</span>
								<i class="bi bi-eye"></i>
								{{ annonce.annonceVues|length }}
								vues
								<span class="small text-center mx-2">|</span>
								<i class="bi bi-bookmark-check"></i>
								{{ annonce.applications|length }}
								offres
							</p>
						</div>
						<div class="d-flex ms-auto small">
							<a class="btn btn-sm btn-primary rounded-pill px-3 me-2" href="{{ path('app_v2_candidate_view_job_offer', {'id': annonce.id })}}" desabled>Plus de details</a>
						</div>
						<div class="">
							<span class="position-absolute top-0 start-50 px-3 translate-middle badge bg-secondary-subtle border border-secondary-subtle text-secondary-emphasis rounded-pill"><i class="bi bi-tags"></i> {{ annonce.secteur.nom}}</span>
						</div>
					</div>
				</div>
				<div class="col-4">
				</div>
			</div>
		</div>

    </section>
{% endblock %}
