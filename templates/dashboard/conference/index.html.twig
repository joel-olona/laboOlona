{% extends 'dashboard/base.html.twig' %}

{% block title %}Video conférence{% endblock %}

{% block body %}
<script src='https://{{ jitsiDomain }}/external_api.js'></script>
<div id="jitsi-container" style="width: 100%; height: 700px;"></div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const options = {{ jitsiConfig|json_encode|raw }};
    options.parentNode = document.querySelector('#jitsi-container');
    options.interfaceConfigOverwrite = {
        APP_NAME: 'Olona Talents',
    }
    console.log(options)
    
    const api = new JitsiMeetExternalAPI("{{ jitsiDomain }}", options);
    // Écouter l'événement onConferenceEnded
    api.addEventListeners({
        videoConferenceEnded: (event) => {
            console.log('La conférence est terminée');
        }
    });
});
</script>
{% endblock %}
