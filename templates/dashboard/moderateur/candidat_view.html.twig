{% extends 'dashboard/base.html.twig' %}

{% block body %}
<div class="container mt-5">
    <h2>Détails du Candidat</h2>

    <!-- Onglets -->
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" id="details-tab" data-bs-toggle="tab" href="#details">Résumé</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="competences-tab" data-bs-toggle="tab" href="#competences">Compétences</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="experiences-tab" data-bs-toggle="tab" href="#experiences">Expériences</a>
        </li>
    </ul>

    <!-- Contenu des onglets -->
    <div class="tab-content mt-3">
        <div class="tab-pane fade show active" id="details">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <img src="{{vich_uploader_asset(candidat, 'file')}}" class="rounded-circle profile-img" width="180" height="180" alt="{{ candidat.candidat.prenom }}">
                        </div> 
                        <div class="col-md-9">
                            <h5 class="card-title">{{ candidat.candidat.nom }} {{ candidat.candidat.prenom }}</h5>
                            <p class="card-text">
                            <span class="text-muted">Email:</span> {{ candidat.candidat.email }}<br>
                            <span class="text-muted">Compétences : </span> <span class="badge text-bg-info">{{ candidat.competences|length }}</span><br>
                            <span class="text-muted">Expériences : </span> <span class="badge text-bg-info">{{ candidat.experiences|length }}</span><br>
                            <span class="text-muted">Applications : </span> <span class="badge text-bg-info">{{ candidat.applications|length }}</span><br>
                            <span class="text-muted">Secteur d'activité : </span><br> 
                                <span class="badge text-bg-warning">
                                    {% for item in candidat.secteurs %}
                                        {{ item.nom }}
                                    {% endfor %}
                                </span>
                            </p> 
                        </div> 
                    </div> 
                    <p class="card-text mt-3">
                        <strong>Biographie:</strong> {{ candidat.resume|raw }}<br>
                    </p> 
                <a href="javascript:history.back()" class="btn btn-secondary rounded-pill my-3"><i class="mx-2 bi bi-arrow-left"></i>Retour</a>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="competences">
            <table class="table" id="competencesTable">
                <thead>
                    <tr>
                        <th class="col-3">Compétence</th>
                        <th class="col-9">Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for competence in candidat.competences %}
                        <tr>
                            <td>{{ competence.nom }}</td>
                            <td>{{ competence.description|raw }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        <a href="javascript:history.back()" class="btn btn-secondary rounded-pill my-3"><i class="mx-2 bi bi-arrow-left"></i>Retour</a>
        </div>

        <div class="tab-pane fade" id="experiences">
            <table class="table" id="experiencesTable">
                <thead>
                    <tr>
                        <th class="col-3">Expérience</th>
                        <th class="col-9">Description</th>
                    </tr>
                </thead>
                <tbody>
                    {% for experience in candidat.experiences %}
                        <tr>
                            <td>
                                {{ experience.nom }}<br>
                                <span class="small">chez <span class="text-muted">{{ experience.entreprise }}</span><br>
                                    {% if experience.enPoste %}
                                        Depuis {{ experience.dateDebut|date('M Y')}}
                                    {% else %}
                                        {{ experience.dateDebut|date('M Y')}} - 
                                        {{ experience.dateFin|date('M Y')}}
                                    {% endif %}
                                </span>
                            </td>
                            <td>{{ experience.description|raw }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        <a href="javascript:history.back()" class="btn btn-secondary rounded-pill my-3"><i class="mx-2 bi bi-arrow-left"></i>Retour</a>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#competencesTable').DataTable();
            $('#experiencesTable').DataTable();
        });
    </script>
{% endblock %}



{# {% extends 'dashboard/base.html.twig' %}

{% block body %}
<div class="container mt-5">
    <h2>Détails du Candidat</h2>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ candidat.candidat.nom }} {{ candidat.candidat.prenom }}</h5>
            <p class="card-text">
                <strong>Email:</strong> {{ candidat.candidat.email }}<br>
                <strong>Résumé:</strong> {{ candidat.resume }}<br>
                <strong>Nombre de Compétences:</strong> <a href="{{ path('app_dashboard_moderateur_candidat_competences', {'id': candidat.id}) }}">{{ candidat.competences|length }}</a><br>
                <strong>Nombre d'Expériences:</strong> <a href="{{ path('app_dashboard_moderateur_candidat_experiences', {'id': candidat.id}) }}">{{ candidat.experiences|length }}</a><br>
                <strong>Nombre d'Applications:</strong> <a href="{{ path('app_dashboard_moderateur_candidat_applications', {'id': candidat.id}) }}">{{ candidat.applications|length }}</a>
           
            </p> 
            <a href="{{ path('app_dashboard_moderateur_candidats') }}" class="btn btn-primary">Retour aux candidats</a>
        </div>
    </div>
</div>
{% endblock %}
 #}
