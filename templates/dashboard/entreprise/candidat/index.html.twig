{% extends 'dashboard/base.html.twig' %}

{% block title %}Chercher un profil{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 class="mb-4">Chercher un profil</h1>
        <table class="table table-responsive" id="candidatsTable">
            <thead>
                <tr>
                    {# <th scope="col">ID</th> #}
                    <th scope="col">Titre</th>    
                    <th scope="col">Nom</th>
                    <th scope="col">Voir profil</th>
                    {# <th scope="col">Candidatures</th> #}
                    {# <th scope="col">Cand. en attente</th> #}
                    <th scope="col">Missions réalisées</th>
                    {# <th scope="col">Cand. réfusée</th> #}
                    <th scope="col">Compétences</th>
                    <th scope="col">Expériences</th>
                    <th scope="col">Langues</th>
                    
                </tr>
            </thead>
            <tbody>
                {% for candidat in candidats %}
                    <tr>
                        <td>{{ candidat.titre }}</td>   
                        <td>{{ candidat.candidat.nom }} {{ candidat.candidat.prenom }}</td>
                        <td><a href="{{ path('app_dashboard_entreprise_details_candidat', {'id': candidat.id}) }}" class="btn btn-info btn-sm"><i class="fas fa-eye"></i> Voir</a></td>
                        <td>
                            <span class="badge bg-success">
                                {{ candidat.applications|filter(app => app.status == 'ACCEPTED')|length }}
                            </span>
                        </td>
                        <td>
                            {% for skill in candidat.competences %}
                            <span class="badge bg-info">
                                    {{ skill.nom }}
                                </span>
                            {% endfor %}
                        </td>
                        <td><span class="badge bg-secondary"><a href="{{ path('app_dashboard_moderateur_candidat_experiences', {'id': candidat.id}) }}" class="text-decoration-none text-white">{{ candidat.experiences|length }}</a></span></td>
                        <td>
                            {% for langue in candidat.langages %}
                                {{ isoToEmoji(langue.langue.code) }}
                            {% endfor %}
                        </td>
                        
                    </tr>
                    {% else %}
                        <tr>
                            <td colspan="9">Aucun candidat trouvé.</td>
                        </tr>
                {% endfor %}
            </tbody>
        </table>

    <a href="javascript:history.back()" class="btn btn-secondary rounded-pill my-3">Retour</a>
        <div class="row">
        </div>
    </div>
{% endblock %}